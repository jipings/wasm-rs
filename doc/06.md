## 内存

操作数栈只适合计算少量数值，借助内存，就可以处理大量数据。

Wasm 内存是一个随机存取器（Random Access Memory，简称RAM）

Wasm 内存可以在限制范围内动态增长。增长必须以页为单位，一页是 65536 个字节，64KB。
内存总页数不能超过 65536。 一个Wasm模块能够使用的内存目前不能超过 4GB

内存指令

内存指令一共有 25条，按操作又可以分为3组。
第一组是加载指令，共14条，从内存中读取数据，压入操作数栈。
第二组是存储指令，共9条，从栈顶弹出数值，写入内存。
第三组是页数获取和增长指令，共2条，不读写内存，只获取或者增长内存页数。

加载指令

加载指令从内存加载数据，转换为适当类型的值，再压入操作数栈。

Wasm 使用立即数+操作数的内存寻址方式。
所有的加载和存储指令都带有两个立即数：对齐方式和内存偏移量。
其中对齐方式存放的是以2为底，对齐字节数的对数。

加载和存储指令还需要从操作数栈上弹出一个i32类型的数，把它和立即数偏移量相加，即可得到实际内存地址。由于静态的立即数偏移量和动态的操作数偏移量都被解释为32位无符号整数，所以Wasm实际上拥有33比特的地址空间。Wasm内存寻址方式可以表示为下面这个等式。
`effective address = immediate offset + operand offset`

存储指令

